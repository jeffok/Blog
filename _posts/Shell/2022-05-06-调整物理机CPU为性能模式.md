---
title: 调整物理机CPU为性能模式
date: 2022-05-06 11:51:00
tags: ["脚本", "Bash", "Shell"]
categories: ["Shell"]
render_with_liquid: false
permalink: /posts/2022-05-06-调整物理机CPU为性能模式/
---

本文档介绍 调整物理机CPU为性能模式 的相关内容。

```bash
# !/bin/bash

# 判断是否设置开机设置cpu为性能模式

if [ "cat /etc/rc.local |grep cpupower" ];then
echo "CPU performance mode has been set at startup"
else
echo "/usr/bin/cpupower frequency-set -g performance" >> /etc/rc.local
fi

# 判断是否已设置了cpu的性能模式

if [ "`cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor`" = "performance" ];then
echo "CPU has been set to performance mode"
else
/usr/bin/cpupower frequency-set -g performance
fi

```

```bash
# !/bin/bash

# 判断文件是否存在 -f判断文件，-d判断文件夹

if [ ! -f "/sys/devices/system/cpu/cpu0/cpufreq/scaling_governor" ];then
    echo "The server does not support CPU performance mode！"
    exit 1
else
     # # 判断是否设置开机设置cpu为性能模式
    if [ "`cat /etc/rc.local |grep cpupower`" ];then
        echo 'startup has been set'
    else
        echo "/usr/bin/cpupower frequency-set -g performance" >> /etc/rc.local
        if [ "`cat /etc/rc.local |grep cpupower`" ];then
            echo "Set started successfully!"
        fi
    fi

    # 判断是否已设置了cpu的性能模式不显示回显
    if [ "`cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor`" = "performance" ];then
        echo "CPU has been set to performance mode"
    else
        /usr/bin/cpupower frequency-set -g performance >> /dev/null 2>&1
    	if [ "`cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor`" = "performance" ];then
    	    echo "CPU set performance mode successfully"
    	fi
    fi
fi

```
