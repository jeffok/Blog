---
title: windows优化
date: 2020-10-28 14:06:00
tags: ["虚拟化", "Windows", "KVM"]
categories: ["Virtual", "Deskcloud"]
render_with_liquid: false
permalink: /posts/2020-10-28-windows优化/
---
> https://www.cnblogs.com/wicked-fly/p/5555522.html

> https://huqiji.iteye.com/blog/2331922

> https://www.jb51.net/article/120467.htm

> https://www.cnblogs.com/wicked-fly/p/5555522.html

> https://www.cnblogs.com/elvi/p/8001298.html

```dockerfile
桌面图标设置
rundll32.exe shell32.dll,Control_RunDLL desk.cpl,,0

virt-install --force \

-name win2012r2 \
-virt-type=kvm \
-vcpus=2 \
-ram 4096 \
-disk /data/vms/win2012r2.qcow2,format=qcow2,bus=virtio,cache=none \
-accelerate --clock offset=localtime \
-network bridge=br0,model=virtio \
-os-type=windows \
-os-variant=win2k12r2 \
-disk /data/iso/cn_windows_server_2012_r2_with_update_x64_dvd_6052725.iso,device=cdrom,bus=ide \
-disk /data/iso/virtio-win.iso,device=cdrom,bus=ide \
-vnc --vncport=5980 --vnclisten=0.0.0.0 \
-noautoconsole --wait 0

[DEFAULT]
plugins=cloudbaseinit.plugins.common.mtu.MTUPlugin,cloudbaseinit.plugins.common.sethostname.SetHostNamePlugin, cloudbaseinit.plugins.common.networkconfig.NetworkConfigPlugin, cloudbaseinit.plugins.common.sshpublickeys.SetUserSSHPublicKeysPlugin, cloudbaseinit.plugins.windows.extendvolumes.ExtendVolumesPlugin, cloudbaseinit.plugins.common.userdata.UserDataPlugin
inject_user_password=YOUR_PASSWORD
config_drive_raw_hhd=true
config_drive_cdrom=false
config_drive_vfat=true
bsdtar_path=C:\Program Files\Cloudbase Solutions\Cloudbase-Init\bin\bsdtar.exe
mtools_path=C:\Program Files\Cloudbase Solutions\Cloudbase-Init\bin\
verbose=true
debug=true
logdir=C:\Program Files\Cloudbase Solutions\Cloudbase-Init\log\
logfile=cloudbase-init.log
default_log_levels=comtypes=INFO,suds=INFO,iso8601=WARN,requests=WARN
logging_serial_port_settings=COM1,115200,N,8
mtu_use_dhcp_config=true
ntp_use_dhcp_config=true
local_scripts_path=C:\Program Files\Cloudbase Solutions\Cloudbase-Init\LocalScripts\
netbios_host_name_compatibility=false
metadata_services=cloudbaseinit.metadata.services.httpservice.HttpService
first_logon_behaviour=no

```
