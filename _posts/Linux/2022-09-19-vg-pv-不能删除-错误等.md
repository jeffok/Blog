---
title: vg pv 不能删除-错误等
date: 2022-09-19 15:07:00
tags: ["系统", "Linux"]
categories: ["Linux"]
render_with_liquid: false
permalink: /posts/2022-09-19-vg-pv-不能删除-错误等/
---

本文档介绍 vg pv 不能删除-错误等 的相关内容。

## vg，pv不能正常删除，出现下边的错误：

```text
WARNING: Device for PV MmDxc7-lOJE-yxV5-MdBg-tcqG-6F55-JVZodU not found or rejected by a filter.
Aborting vg_write: No metadata areas to write to!

```

## 解决方法：

```bash
# lvremove --force --verbose /dev/vg02/u01

  WARNING: Device for PV ore6TE-2ues-rc5q-mkCN-hEHE-C4Av-paaxEH not found or rejected by a filter.
    There are 1 physical volumes missing.
    Archiving volume group "vg02" metadata (seqno 2).
    Releasing logical volume "u01"
  Aborting vg_write: No metadata areas to write to!

# lvs

  WARNING: Device for PV ore6TE-2ues-rc5q-mkCN-hEHE-C4Av-paaxEH not found or rejected by a filter.
  LV   VG   Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
  opt  vg01 -wi-ao---- 995.00g
  u01  vg02 -wi-----p- 248.00g

# dd if=/dev/zero of=/tmp/tmp.raw bs=1M count=100

100+0 records in
100+0 records out
104857600 bytes (105 MB) copied, 0.0763176 s, 1.4 GB/s

# losetup -f

/dev/loop0

# losetup /dev/loop0 /tmp/tmp.raw

# vgextend vg02 /dev/loop0

  WARNING: Device for PV ore6TE-2ues-rc5q-mkCN-hEHE-C4Av-paaxEH not found or rejected by a filter.
  WARNING: Device for PV ore6TE-2ues-rc5q-mkCN-hEHE-C4Av-paaxEH not found or rejected by a filter.
  Physical volume "/dev/loop0" successfully created.
  WARNING: Device for PV ore6TE-2ues-rc5q-mkCN-hEHE-C4Av-paaxEH not found or rejected by a filter.
  Volume group "vg02" successfully extended

# vgremove vg02 --force

  WARNING: Device for PV ore6TE-2ues-rc5q-mkCN-hEHE-C4Av-paaxEH not found or rejected by a filter.
  Logical volume "u01" successfully removed
  Volume group "vg02" successfully removed

# pvremove /dev/loop0

  WARNING: Device for PV ore6TE-2ues-rc5q-mkCN-hEHE-C4Av-paaxEH not found or rejected by a filter.
  Labels on physical volume "/dev/loop0" successfully wiped.

# losetup -d /dev/loop0

# rm /tmp/tmp.raw

# lvs

  LV   VG   Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert
  opt  vg01 -wi-ao---- 995.00g

# vgs

  VG   #PV #LV #SN Attr   VSize   VFree
  vg01   1   1   0 wz--n- 999.99g 4.99g

# pvs

  WARNING: Device for PV ore6TE-2ues-rc5q-mkCN-hEHE-C4Av-paaxEH not found or rejected by a filter.
  PV         VG   Fmt  Attr PSize   PFree
  /dev/sdb   vg01 lvm2 a--  999.99g 4.99g

```

## 修复：

```bash
# 修复pv：

# pvcreate /dev/sdb1 --u iUJdjw-C9S6-bRE7-jIdl-6kQ6-esLL-5vDGYE --norestorefile

# 强制移除pv

# vgreduce --removemissing lvm-ssd

```
