---
title: DKIM邮箱签名
date: 2019-03-30 12:28:00
tags: ["技术"]
categories: ['SoftWare']
render_with_liquid: false
permalink: /posts/2019-03-30-DKIM邮箱签名/
---
> https://www.wealsoft.com/article/art_viewpage.aspx?bid=2&aid=33

> 邮箱黑名单查询

> http://www.emailcamel.com/node/193

> http://multirbl.valli.org/lookup/

> https://whatismyipaddress.com/blacklist-check

## ## DKIM设置步骤说明

```bash
# 创建签名文件

genrsa -out rsakey.pem 1024

# 生成rsapen私钥文件

rsa -out pubkey.pem -in rsakey.pem -pubout

# 根据私钥文件生成了公钥文件 pubkey.pem

在域名中设置公钥

假设我们的部门名称是“12345”（部门名称可以是字母数字任意），那么我们就在域名控制面板中增加主机记录“12345._domainkey” 的 TXT 解析记录。

* *-*记录值格式为“k=rsa; p=MIGf...AQAB”，其中 p= 后边的一串字符就是我们在第一步中创建的公钥文件pubkey.pem里边“-----BEGIN PUBLIC KEY-----”和“-----END PUBLIC KEY-----”之间的内容。
记录值获取具体步骤：

# 删掉第一行和最后一行，然后把所有换行删除，把整个内容变成一行

# 再开头加上 k=rsa; p=，就得到了域名里要填写的解析记录值的数据

k=rsa; p=MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQClgSWWBtD8EI7cNaag1JXmyQTpbACSjH8Av4sRVXEQbbxJDDn0rBQaWUX0cVRTxZmxzv9aFKAXvj5jx2C1xHiuprSoHzcSx9KH6sqFjy2iU/fxks00F8vMkey38O47NwYvcIzv3NgghTgvg+7j+l2dxyQkojeXxa2NcFCIFKmDhQIDAQAB

在软件中设置DKIM签名
部门名就是刚才域名中的部门名12345，私钥，选择我们刚才创建的 rsakey.pem 文件。
验证签名效果
方法1：目前 gmail 邮箱是支持签名验证的，所以我们可以发送一封邮件到 gmail 邮箱来验证签名是否生效。
如果署域没有显示，那说明签名没有成功，请检查域名是否已经生效，检查以上步骤是否有设置错误的地方。
方法 2 : 发给新浪或网易测试
也可以发送给 sina 邮箱或者网易邮箱来判定DKIM签名是否有效。判断方法：收到邮件后，查看邮件的邮件头，如果显示 dkim=pass 则说明 DKIM 签名正确有效。
例如：
Authentication-Results: mx28; spf=neutral smtp.mail=your.email@example.com; dkim=pass header.i=@wealsoft.com

```
