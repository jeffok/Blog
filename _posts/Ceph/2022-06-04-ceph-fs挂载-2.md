---
title: ceph-fs挂载
date: 2022-06-04 10:50:00
tags: ["存储", "Ceph", "CephFS"]
categories: ["Ceph", "Ceph-FS"]
render_with_liquid: false
permalink: /posts/2022-06-04-ceph-fs挂载/
---

本文档介绍 ceph-fs挂载 的相关内容。

```bash
mount -t ceph 10.225.4.226:6789:/ /opt -o name=admin,secret=AQAtHKBdfR+NIBAAr2lZJNyrdknLNo9NyvveTg==,mds_namespace=cephfs

挂载方式

# 创建挂载点

[root@ceph-client ~]# mkdir -p /cephfs

# 注意MDS的状态：up:active；

# 挂载格式：mount -t ceph Mon-IP:6789:/ /MOUNTPOINT [-o name=amdin,secret=Keyring\secretfile=/Path/to/Secretfile]；

# 默认采用ceph-deploy部署ceph集群是开启了cephx认证，需要挂载secret-keyring，即集群mon节点/etc/ceph/ceph.client.admin.keyring文件中的”key”值，采用secretfile可不用暴露keyring，但有1个bug（https://bugzilla.redhat.com/show_bug.cgi?id=1030402），始终报错：libceph: bad option at 'secretfile=/etc/ceph/admin.secret'；

# 如果ceph集群含多个文件系统（默认只能创建1个文件系统，多文件系统属于实验性质，需打开开关），挂载时需要指定，参数：-o mds_namespace=CEPHFS-Name，

[root@ceph-client ~]# mount -t ceph 172.30.200.57:6789:/ /cephfs -o name=admin,secret=AQBzx5hbtt2iJxAAE4dsque5hpNzWOEYzGNzBw==

# filesystem列设置为”ceph”，filesystem parameters列设置挂载user/key，时间等；

# noatime：禁止更新文件与目录的inode访问时间，以获得更快的访问速度；

# _netdev：标识文件系统位于网络上，防止网络启动前挂载

[root@ceph-client ~]# vim /etc/fstab

# cephfs

172. 30.200.57:6789:/ /cephfs ceph name=admin,secret=AQBzx5hbtt2iJxAAE4dsque5hpNzWOEYzGNzBw==,noatime,_netdev 0 0

```
